# name: bidblock.ca Continuous Integration

# on:
#   push:
#     branches:
#       - production-v2  # Trigger deployment only when changes are pushed to production-v2

# jobs:
#   bidblockca_Automated_Deployment_Process:
#     runs-on: ubuntu-latest

#     steps:
#     - name: Retrieve actions/checkout@v2 ğŸ’»
#       uses: actions/checkout@v2
#       with:
#         ref: ${{ github.ref }}

#     - name: Setup Node.js
#       uses: actions/setup-node@v2
#       with:
#         node-version: '18.19.0'

#     - name: Remove past build resources ğŸ—‘ï¸, Check Repo and .env ğŸ‘ï¸, Github pull origin production-v2 ğŸ”½, Npm install ğŸ”½, sharp special install ğŸ”½, re-build with webpack in prod version ğŸ”§, and PM2 restart needed process server ğŸ”ƒ
#       uses: appleboy/ssh-action@master
#       with:
#         host: ${{ secrets.SERVER_HOSTNAME }}
#         username: ${{ secrets.SERVER_USERNAME }}
#         password: ${{ secrets.SERVER_PASSWORD }}
#         port: ${{ secrets.SERVER_PORT }}
#         script: |
#           nvm use 18.19.0
#           cd Trypto-github
#           rm package-lock.json
#           rm -r node_modules
#           rm -r public/dist
#           ls
#           cat .env
#           git pull https://${{ secrets.GITHUUB_USERNAME }}:${{ secrets.GITHUUB_PASSWORD }}@github.com/${{ secrets.GITHUUB_USERNAME }}/Trypto-github.git production-v2
#           npm install
#           npm uninstall sharp
#           npm install --os=linux --cpu=x64 sharp
#           npm run build:prod
#           pm2 restart server